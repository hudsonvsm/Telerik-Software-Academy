<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title></title>
	<link href="styles/js-console.css" rel="stylesheet" />
	<script src="scripts/string-extensions.js"></script>
</head>
<body>
	<p>"Write a function for extracting all email addresses from given text. All substrings that match the format identifier@host…domain should be recognized as emails. Return the emails as array of strings."</p>
	<div id="inputdiv">
		<div class="input">
			<label for="tb-first">Text: </label>
			<input type="text" id="tb-first" />
		</div>
		<div id="inputbutton">
			<a href="#" onclick="onFindButtonClick()">Find</a>
		</div>
	</div>
	<div id="js-console"></div>
	<script src="scripts/js-console.js"></script>
	<script>
		function onFindButtonClick() {
			//var text = jsConsole.read('#tb-first');

			//test
			var text = "svirka@kaval.com, esrthjfghj sladurana@duduk.net aerhgd, -123--@usa.net, test.test123@en.some-host.12345.com, .ala.@bala.com, test@-host.com, user@.test.ru, user@test.ru., alabala@, user@host, @eu.net";

			var emailArr = [];
			var index = text.indexOf("@");

			for (var i = 0; i < text.length-1; i++) {
				if (text[i]==='@') {
					if (text[index - 1] != " " && text[index + 1] != " ") {
						var identifier = text.substring(text.lastIndexOf(" ", index - 1), index);
						var host = text.substring(index + 1, text.indexOf(".", index + 1));
						var domain = text.substring(text.indexOf(".", index + 1) + 1, text.indexOf(" ", text.indexOf(".", index + 1) + 1));
						var email = identifier + "@" + host + "." + domain;//it's not working slow for 5 elements
						emailArr.push(email);
						index = text.indexOf("@", index + 1);
					}
				}
			}
			//for (var email in emailArr) {
			//	jsConsole.writeLine(emailArr[email]);
			//}
			jsConsole.writeLine(emailArr.join(''));
		}
	</script>
</body>
</html>
